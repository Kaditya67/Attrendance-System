{% extends "student_base.html" %}
{% load static %}

{% block content %}
<!-- Page Content -->
<div class="content" id="mainContent">
    <h2>Asad Sayyad</h2>

    <!-- Metrics Section -->
<!-- Updated Metrics Section with Enhanced Colors -->
<div class="metrics-container">
    <div class="metric-box" id="attendanceMetric" style="color: rgb(14, 7, 7);">
        <h3 style="color: rgb(14, 7, 7);">Total Attendance</h3>
        <div class="metric-visualization" style="width: 100%; height:400px; background-color: #e8f0fe;">
            <!-- Display Pie Chart from Plotly -->
            {{ attendance_chart|safe }}
        </div>
        <p>Total Attendance: <span id="totalAttendance" style="color: #141104;">{{ total_attendance }}%</span></p>
    </div>
</div>

<div>
    <!-- Student Information Table -->
    <table id="studentTable">
        <thead>
            <tr>
                <th>S.No</th>
                <th>Date</th>
                <th>8:00 AM - 9:00 AM</th>
                <th>9:00 AM - 10:00 AM</th>
                <th>10:00 AM - 11:00 AM</th>
                <th>Short Break</th>
                <th>11:15 AM - 12:15 PM</th>
                <th>Lunch Break</th>
                <th>2:00 PM - 3:00 PM</th>
                <th>3:00 PM - 4:00 PM</th>
                <th>4:00 PM - 5:00 PM</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>1/2/24</td>
                <td>Math</td>
                <td style="color: red;">Maths (Absent)</td>
                <td>Chemistry</td>
                <td></td>
                <td>Biology</td>
                <td></td> 
                <td>English</td>
                <td>Lab 1</td>
                <td>Lab 2</td>
            </tr>
            <tr>
                <td>1</td>
                <td>1/2/24</td>
                <td>Math</td>
                <td style="color: red;">Maths (Absent)</td>
                <td>Chemistry</td>
                <td></td>
                <td>Biology</td>
                <td></td> 
                <td>English</td>
                <td>Lab 1</td>
                <td>Lab 2</td>
            </tr>
            <tr>
                <td>1</td>
                <td>1/2/24</td>
                <td>Math</td>
                <td style="color: red;">Maths (Absent)</td>
                <td>Chemistry</td>
                <td></td>
                <td>Biology</td>
                <td></td> 
                <td>English</td>
                <td>Lab 1</td>
                <td>Lab 2</td>
            </tr>
            <tr>
                <td>1</td>
                <td>1/2/24</td>
                <td>Math</td>
                <td style="color: red;">Maths (Absent)</td>
                <td>Chemistry</td>
                <td></td>
                <td>Biology</td>
                <td></td> 
                <td>English</td>
                <td>Lab 1</td>
                <td>Lab 2</td>
            </tr>
            <tr>
                <td>1</td>
                <td>1/2/24</td>
                <td>Math</td>
                <td style="color: red;">Maths (Absent)</td>
                <td>Chemistry</td>
                <td></td>
                <td>Biology</td>
                <td></td> 
                <td>English</td>
                <td>Lab 1</td>
                <td>Lab 2</td>
            </tr>
            <tr>
                <td>1</td>
                <td>1/2/24</td>
                <td>Math</td>
                <td style="color: red;">Maths (Absent)</td>
                <td>Chemistry</td>
                <td></td>
                <td>Biology</td>
                <td></td> 
                <td>English</td>
                <td>Lab 1</td>
                <td>Lab 2</td>
            </tr>
            <tr>
                <td>1</td>
                <td>1/2/24</td>
                <td>Math</td>
                <td style="color: red;">Maths (Absent)</td>
                <td>Chemistry</td>
                <td></td>
                <td>Biology</td>
                <td></td> 
                <td>English</td>
                <td>Lab 1</td>
                <td>Lab 2</td>
            </tr>
            <tr>
                <td>1</td>
                <td>1/2/24</td>
                <td>Math</td>
                <td style="color: red;">Maths (Absent)</td>
                <td>Chemistry</td>
                <td></td>
                <td>Biology</td>
                <td></td> 
                <td>English</td>
                <td>Lab 1</td>
                <td>Lab 2</td>
            </tr>
        </tbody>
    </table>
    
</div>

<!-- JavaScript for Sidebar -->
<script>
    src="https://cdn.plot.ly/plotly-latest.min.js"
    function openNav() {
        document.getElementById("mySidebar").style.width = "250px";
        document.getElementById("mainContent").style.marginLeft = "250px";
    }

    function closeNav() {
        document.getElementById("mySidebar").style.width = "0";
        document.getElementById("mainContent").style.marginLeft = "0";
    }

    function assignAttendance() {
        const table = document.getElementById('studentTable');
        const rows = table.getElementsByTagName('tr');

        for (let i = 1; i < rows.length; i++) {
            const statusCell = rows[i].getElementsByTagName('td')[2];
            const status = Math.random() > 0.5 ? 'Present' : 'Absent';
            statusCell.className = status === 'Present' ? 'present' : 'absent';
            statusCell.textContent = status;
        }
    }
</script>
{% endblock %}
